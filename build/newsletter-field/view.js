(()=>{document.addEventListener("DOMContentLoaded",(()=>{if(!window.gutenaNewsletterBlockLegacy)return;let n=document.querySelectorAll(".gutena-newsletter-field-block .gutena-newsletter-form");for(let a=0;a<n.length;a++){var s;null===(s=n[a])||void 0===s||s.addEventListener("submit",(function(s){var l;s.preventDefault();let r=n[a].closest(".gutena-newsletter-field-block"),c=null==r?void 0:r.nextElementSibling,o=n[a].querySelector("#gutena-newsletter-field").value,u=n[a].querySelector("#gutena-newsletter-settings").value;if(c&&"undefined"!==c&&c.classList.contains("gutena-newsletter-message")&&c.remove(),!t(o))return void e(r,{textContent:gutenaNewsletterBlockLegacy.email_invalid,className:"gutena-newsletter-message status error"});e(r,{innerHTML:'<span class="loader"></span>'+gutenaNewsletterBlockLegacy.in_process,className:"gutena-newsletter-message success"});const i=new FormData;i.append("action","gutena_subscribe_newsletter"),i.append("nonce",gutenaNewsletterBlockLegacy.nonce),i.append("email",o),i.append("data",u),fetch(null===(l=gutenaNewsletterBlockLegacy)||void 0===l?void 0:l.ajax_url,{method:"POST",credentials:"same-origin",body:i}).then((e=>e.json())).then((t=>{var n;t&&(null!=r&&null!==(n=r.nextElementSibling)&&void 0!==n&&n.classList.contains("gutena-newsletter-message")&&r.nextElementSibling.remove(),"success"==t.status&&(r.querySelector("#gutena-newsletter-field").value=""),e(r,{textContent:t.message,className:"gutena-newsletter-message status "+t.status}))})).catch((t=>{e(r,{textContent:t,className:"gutena-newsletter-message error"})}))}))}}));const e=(e,t)=>{e.after(Object.assign(document.createElement("div"),t))},t=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})();