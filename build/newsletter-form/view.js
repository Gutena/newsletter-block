(()=>{document.addEventListener("DOMContentLoaded",(()=>{if(!gutenaNewsletterBlock)return;let t=document.querySelectorAll(".gutena-newsletter-form");for(let s=0;s<t.length;s++){var n;null===(n=t[s])||void 0===n||n.addEventListener("submit",(function(n){var a;n.preventDefault();let l=t[s],r=null==l?void 0:l.nextElementSibling,i=l.querySelector("#gutena-newsletter-field").value,c=l.querySelector("#gutena-newsletter-settings").value;if(r&&"undefined"!==r&&r.classList.contains("gutena-newsletter-message")&&r.remove(),!e(i))return void l.after(Object.assign(document.createElement("div"),{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.email_invalid}</span>`,className:"gutena-newsletter-message status error"}));l.after(Object.assign(document.createElement("div"),{innerHTML:`<span class="loader"></span><span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.in_process}</span>`,className:"gutena-newsletter-message success"}));const o=new FormData;o.append("action","gutena_subscribe_newsletter"),o.append("nonce",gutenaNewsletterBlock.nonce),o.append("email",i),o.append("data",c),fetch(null===(a=gutenaNewsletterBlock)||void 0===a?void 0:a.ajax_url,{method:"POST",credentials:"same-origin",body:o}).then((e=>e.json())).then((e=>{var t;e&&(null!=l&&null!==(t=l.nextElementSibling)&&void 0!==t&&t.classList.contains("gutena-newsletter-message")&&l.nextElementSibling.remove(),"success"==e.status&&(l.querySelector("#gutena-newsletter-field").value=""),l.after(Object.assign(document.createElement("div"),{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${e.message}</span>`,className:"gutena-newsletter-message status "+e.status})))})).catch((e=>{l.after(Object.assign(document.createElement("div"),{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${e}</span>`,className:"gutena-newsletter-message error"}))}))}))}}));const e=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})();