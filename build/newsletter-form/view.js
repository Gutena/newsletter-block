(()=>{document.addEventListener("DOMContentLoaded",(()=>{if(!window.gutenaNewsletterBlock)return;let n=document.querySelectorAll(".gutena-newsletter-form-block .gutena-newsletter-form");for(let a=0;a<n.length;a++){var s;null===(s=n[a])||void 0===s||s.addEventListener("submit",(function(s){var l;s.preventDefault();let r=n[a],i=null==r?void 0:r.nextElementSibling,o=r.querySelector("#gutena-newsletter-field").value,u=r.querySelector("#gutena-newsletter-settings").value;if(i&&"undefined"!==i&&i.classList.contains("gutena-newsletter-message")&&i.remove(),!t(o))return void e(r,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.email_invalid}</span>`,className:"gutena-newsletter-message status error"});e(r,{innerHTML:`<span class="loader"></span><span id="gutena-newsletter-info-text" class="info-text">${gutenaNewsletterBlock.in_process}</span>`,className:"gutena-newsletter-message success"});const c=new FormData;c.append("action","gutena_subscribe_newsletter"),c.append("nonce",gutenaNewsletterBlock.nonce),c.append("email",o),c.append("data",u),fetch(null===(l=gutenaNewsletterBlock)||void 0===l?void 0:l.ajax_url,{method:"POST",credentials:"same-origin",body:c}).then((e=>e.json())).then((t=>{var n;t&&(null!=r&&null!==(n=r.nextElementSibling)&&void 0!==n&&n.classList.contains("gutena-newsletter-message")&&r.nextElementSibling.remove(),"success"==t.status&&(r.querySelector("#gutena-newsletter-field").value=""),e(r,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${t.message}</span>`,className:"gutena-newsletter-message status "+t.status}))})).catch((t=>{e(r,{innerHTML:`<span id="gutena-newsletter-info-text" class="info-text">${t}</span>`,className:"gutena-newsletter-message error"})}))}))}}));const e=(e,t)=>{e.after(Object.assign(document.createElement("div"),t))},t=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})();